# Migration `20210212052826-add-attributes-to-reply-model`

This migration has been generated by Nirmalya Ghosh at 2/12/2021, 10:58:26 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "Reply" ADD COLUMN     "userId" TEXT NOT NULL

ALTER TABLE "UserTeams" ADD COLUMN     "body" TEXT NOT NULL

ALTER TABLE "Reply" ADD FOREIGN KEY("userId")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210211201534-adds-reply-model..20210212052826-add-attributes-to-reply-model
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgres"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -12,9 +12,9 @@
 // --------------------------------------
 model User {
-  id        String         @id @default(uuid())
+  id        String      @id @default(uuid())
   createdAt DateTime    @default(now())
   updatedAt DateTime    @updatedAt
   name      String
   email     String      @unique
@@ -24,12 +24,13 @@
   userTeams UserTeams[]
   teams     Team[]      @relation(fields: [teamId], references: [id])
   teamId    String?
   avatar    String
+  Reply     Reply[]
 }
 model Session {
-  id                 String       @id @default(uuid())
+  id                 String    @id @default(uuid())
   createdAt          DateTime  @default(now())
   updatedAt          DateTime  @updatedAt
   expiresAt          DateTime?
   handle             String    @unique
@@ -41,9 +42,9 @@
   privateData        String?
 }
 model Project {
-  id        String      @id @default(uuid())
+  id        String   @id @default(uuid())
   name      String
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
   files     File[]
@@ -52,9 +53,9 @@
   isPublic  Boolean  @default(false)
 }
 model File {
-  id        String       @id @default(uuid())
+  id        String    @id @default(uuid())
   name      String
   url       String
   createdAt DateTime  @default(now())
   updatedAt DateTime  @updatedAt
@@ -63,9 +64,9 @@
   comments  Comment[]
 }
 model Comment {
-  id          String      @id @default(uuid())
+  id          String   @id @default(uuid())
   body        String
   createdAt   DateTime @default(now())
   updatedAt   DateTime @updatedAt
   file        File     @relation(fields: [fileId], references: [id])
@@ -73,14 +74,14 @@
   user        User     @relation(fields: [userId], references: [id])
   userId      String
   coordinateX Float
   coordinateY Float
-  isResolved Boolean @default(false)
-  replies Reply[]
+  isResolved  Boolean  @default(false)
+  replies     Reply[]
 }
 model Team {
-  id          String         @id @default(uuid())
+  id          String      @id @default(uuid())
   createdAt   DateTime    @default(now())
   updatedAt   DateTime    @updatedAt
   projects    Project[]
   name        String
@@ -89,19 +90,22 @@
   users       User[]
 }
 model UserTeams {
-  id     String   @id @default(uuid())
-  user   User? @relation(fields: [userId], references: [id])
-  team   Team? @relation(fields: [teamId], references: [id])
+  id     String  @id @default(uuid())
+  body   String
+  user   User?   @relation(fields: [userId], references: [id])
+  team   Team?   @relation(fields: [teamId], references: [id])
   userId String?
   teamId String?
 }
 model Reply {
-  id     String   @id @default(uuid())
-  createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
-  isResolved Boolean @default(false)
-  comment        Comment     @relation(fields: [commentId], references: [id])
-  commentId      String
+  id         String   @id @default(uuid())
+  createdAt  DateTime @default(now())
+  updatedAt  DateTime @updatedAt
+  isResolved Boolean  @default(false)
+  comment    Comment  @relation(fields: [commentId], references: [id])
+  commentId  String
+  user       User     @relation(fields: [userId], references: [id])
+  userId     String
 }
```


