# Migration `20210211201534-adds-reply-model`

This migration has been generated by Nirmalya Ghosh at 2/12/2021, 1:45:34 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "Comment" ADD COLUMN     "isResolved" BOOLEAN NOT NULL DEFAULT false

CREATE TABLE "Reply" (
    "id" TEXT NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" TIMESTAMP(3) NOT NULL,
    "isResolved" BOOLEAN NOT NULL DEFAULT false,
    "commentId" TEXT NOT NULL,

    PRIMARY KEY ("id")
)

ALTER TABLE "Reply" ADD FOREIGN KEY("commentId")REFERENCES "Comment"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210209175200-changes-id-to-uuid-for-all-models..20210211201534-adds-reply-model
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgres"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -73,8 +73,10 @@
   user        User     @relation(fields: [userId], references: [id])
   userId      String
   coordinateX Float
   coordinateY Float
+  isResolved Boolean @default(false)
+  replies Reply[]
 }
 model Team {
   id          String         @id @default(uuid())
@@ -93,4 +95,13 @@
   team   Team? @relation(fields: [teamId], references: [id])
   userId String?
   teamId String?
 }
+
+model Reply {
+  id     String   @id @default(uuid())
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+  isResolved Boolean @default(false)
+  comment        Comment     @relation(fields: [commentId], references: [id])
+  commentId      String
+}
```


