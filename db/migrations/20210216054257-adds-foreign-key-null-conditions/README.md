# Migration `20210216054257-adds-foreign-key-null-conditions`

This migration has been generated by Nirmalya Ghosh at 2/16/2021, 11:12:58 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "Comment" ALTER COLUMN "fileId" DROP NOT NULL,
ALTER COLUMN "userId" DROP NOT NULL

ALTER TABLE "File" ALTER COLUMN "projectId" DROP NOT NULL

ALTER TABLE "Reply" ALTER COLUMN "commentId" DROP NOT NULL,
ALTER COLUMN "userId" DROP NOT NULL
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210215144049-adds-attributes-to-file-model..20210216054257-adds-foreign-key-null-conditions
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgres"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -58,10 +58,10 @@
   name         String
   url          String
   createdAt    DateTime  @default(now())
   updatedAt    DateTime  @updatedAt
-  project      Project   @relation(fields: [projectId], references: [id])
-  projectId    String
+  project      Project?  @relation(fields: [projectId], references: [id])
+  projectId    String?
   comments     Comment[]
   height       Int       @default(0)
   width        Int       @default(0)
   thumbnailUrl String    @default("")
@@ -71,12 +71,12 @@
   id          String   @id @default(uuid())
   body        String
   createdAt   DateTime @default(now())
   updatedAt   DateTime @updatedAt
-  file        File     @relation(fields: [fileId], references: [id])
-  fileId      String
-  user        User     @relation(fields: [userId], references: [id])
-  userId      String
+  file        File?    @relation(fields: [fileId], references: [id])
+  fileId      String?
+  user        User?    @relation(fields: [userId], references: [id])
+  userId      String?
   coordinateX Float
   coordinateY Float
   isResolved  Boolean  @default(false)
   replies     Reply[]
@@ -106,9 +106,9 @@
   body       String
   createdAt  DateTime @default(now())
   updatedAt  DateTime @updatedAt
   isResolved Boolean  @default(false)
-  comment    Comment  @relation(fields: [commentId], references: [id])
-  commentId  String
-  user       User     @relation(fields: [userId], references: [id])
-  userId     String
+  comment    Comment? @relation(fields: [commentId], references: [id])
+  commentId  String?
+  user       User?    @relation(fields: [userId], references: [id])
+  userId     String?
 }
```


